library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.std_logic_unsigned.ALL;
use IEEE.std_logic_arith.ALL;
use IEEE.NUMERIC_STD.ALL;

entity testRegisters is
    port(
        dav: in std_logic;
        data: in std_logic_vector(3 downto 0);

        A,B, out std_logic_vector(6 downto 0)
    );
end entity;

architecture behavior of testRegisters is

    component registerSelector is
        port(
            DAV: in std_logic;
            sel: out std_logic_vector(5 downto 0)
        );
    end component;

    signal sel: std_logic_vector(5 downto 0);

    component fourbitsRegister is 
        Port(
            CLK:in std_logic;
            D:in std_logic_vector(3 downto 0);
            Q:out std_logic_vector(3 downto 0)
        );
    end component;

    type Q_array is array (1 to 6) of std_logic_vector(3 downto 0);
    signal Q: Q_array;

    component bitConcat is
        port (
            input_hundreds,input_tens,input_units: in  std_logic_vector(3 downto 0);

            output_result: out std_logic_vector(6 downto 0)
        );
    end component;

begin

    rs: registerSelector port map(dav,sel);

    fbr1: fourbitsRegister port map(sel(0),data,Q(1));
    fbr2: fourbitsRegister port map(sel(1),data,Q(2));
    fbr3: fourbitsRegister port map(sel(2),data,Q(3));
    fbr4: fourbitsRegister port map(sel(3),data,Q(4));
    fbr5: fourbitsRegister port map(sel(4),data,Q(5));
    fbr6: fourbitsRegister port map(sel(5),data,Q(6));

    bcA: bitConcat port map(Q(1),Q(2),Q(3),A);
    bcB: bitConcat port map(Q(4),Q(5),Q(6),B);

end architecture;